# API Headers and Parameters Guide

**Version:** 1.0  
**Date:** 2026-01-17  
**Status:** Complete

---

## üìã Overview

This guide documents all standard headers and parameters used across the StayOS API. These follow industry best practices for enterprise-grade APIs including multi-tenancy, observability, localization, and security.

---

## üè¢ Multi-Tenancy & Organization

### **X-Tenant-Id** (Required)
- **Type:** Header
- **Format:** UUID
- **Purpose:** Tenant identifier for multi-tenant data isolation
- **Example:** `X-Tenant-Id: 550e8400-e29b-41d4-a716-446655440000`
- **Notes:** Required for all API requests. Ensures data is isolated per tenant.

### **X-Brand-Id** (Optional)
- **Type:** Header
- **Format:** UUID
- **Purpose:** Brand identifier for multi-brand organizations
- **Example:** `X-Brand-Id: 660e8400-e29b-41d4-a716-446655440001`
- **Notes:** Used when a tenant manages multiple brands (e.g., hotel chains with different brands).

### **X-Organization-Id** (Optional)
- **Type:** Header
- **Format:** UUID
- **Purpose:** Organization identifier for enterprise hierarchies
- **Example:** `X-Organization-Id: 770e8400-e29b-41d4-a716-446655440002`
- **Notes:** Used for corporate/franchise structures with multiple levels.

---

## üåç Localization & Internationalization

### **Accept-Language**
- **Type:** Header
- **Format:** Language tag (ISO 639-1)
- **Purpose:** Preferred language for response content
- **Example:** `Accept-Language: en-US,en;q=0.9,es;q=0.8`
- **Default:** `en`
- **Notes:** Supports multiple languages with quality values (RFC 7231).

### **Content-Language**
- **Type:** Request/Response Header
- **Format:** Language tag (ISO 639-1)
- **Purpose:** Language of the content
- **Example:** `Content-Language: en-US`

### **X-Timezone**
- **Type:** Header
- **Format:** IANA timezone name
- **Purpose:** Client timezone for date/time operations
- **Example:** `X-Timezone: America/New_York`
- **Default:** `UTC`
- **Notes:** Used for scheduling, availability checks, and reporting.

### **X-Currency**
- **Type:** Header
- **Format:** ISO 4217 currency code (3 letters)
- **Purpose:** Preferred currency for monetary values
- **Example:** `X-Currency: USD`
- **Notes:** Overrides property default currency.

---

## üîç Correlation, Observability & Tracing

### **X-Request-Id** (Auto-generated)
- **Type:** Response Header
- **Format:** UUID
- **Purpose:** Unique identifier for each request
- **Example:** `X-Request-Id: 880e8400-e29b-41d4-a716-446655440003`
- **Notes:** Auto-generated by the server. Used for debugging and support.

### **X-Correlation-Id**
- **Type:** Request/Response Header
- **Format:** UUID
- **Purpose:** Correlate related requests across services
- **Example:** `X-Correlation-Id: 990e8400-e29b-41d4-a716-446655440004`
- **Notes:** Client-generated. Useful for tracking multi-step workflows.

### **X-Trace-Id**
- **Type:** Request/Response Header
- **Format:** OpenTelemetry trace ID
- **Purpose:** Distributed tracing across microservices
- **Example:** `X-Trace-Id: 00-4bf92f3577b34da6a3ce929d0e0e4736-00f067aa0ba902b7-01`
- **Notes:** OpenTelemetry compatible. Auto-generated if not provided.

### **X-Span-Id**
- **Type:** Request/Response Header
- **Format:** OpenTelemetry span ID
- **Purpose:** Span identifier for distributed tracing
- **Example:** `X-Span-Id: 00f067aa0ba902b7`

### **X-Client-Id**
- **Type:** Header
- **Format:** String
- **Purpose:** Client application identifier
- **Example:** `X-Client-Id: stayos-web-app-v2.1.0`
- **Notes:** Helps track API usage by client application.

### **X-Client-Version**
- **Type:** Header
- **Format:** Semantic version (X.Y.Z)
- **Purpose:** Client application version
- **Example:** `X-Client-Version: 2.1.0`
- **Pattern:** `^\d+\.\d+\.\d+$`

### **User-Agent**
- **Type:** Header
- **Format:** String
- **Purpose:** Client user agent information
- **Example:** `User-Agent: StayOS-Mobile/2.1.0 (iOS 17.0; iPhone14,2)`

---

## üîÑ Versioning & Feature Flags

### **X-API-Version**
- **Type:** Request/Response Header
- **Format:** Date (YYYY-MM-DD)
- **Purpose:** Explicit API version override
- **Example:** `X-API-Version: 2026-01-17`
- **Notes:** Alternative to URL-based versioning. Date-based versioning.

### **X-Feature-Flags**
- **Type:** Header
- **Format:** Comma-separated string
- **Purpose:** Enable specific features for gradual rollouts
- **Example:** `X-Feature-Flags: new-reservation-flow,enhanced-search,beta-analytics`
- **Notes:** Used for A/B testing and feature toggles.

### **X-Deprecation** (Response)
- **Type:** Response Header
- **Format:** ISO 8601 date
- **Purpose:** Indicates endpoint is deprecated
- **Example:** `X-Deprecation: 2026-06-01`

### **X-Sunset** (Response)
- **Type:** Response Header
- **Format:** ISO 8601 date-time
- **Purpose:** Date when endpoint will be removed
- **Example:** `X-Sunset: 2026-12-31T23:59:59Z`

---

## üîí Security & Compliance

### **Authorization** (Required)
- **Type:** Header
- **Format:** `Bearer <token>`
- **Purpose:** JWT authentication token
- **Example:** `Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`
- **Notes:** OAuth 2.0 Bearer token from authentication flow.

### **X-API-Key** (Alternative)
- **Type:** Header
- **Format:** String
- **Purpose:** API key for server-to-server integration
- **Example:** `X-API-Key: sk_live_51H...`
- **Notes:** Used for service accounts and integrations.

### **X-Forwarded-For**
- **Type:** Header
- **Format:** IP address(es)
- **Purpose:** Original client IP (for proxied requests)
- **Example:** `X-Forwarded-For: 203.0.113.195, 70.41.3.18`

### **X-Real-IP**
- **Type:** Header
- **Format:** IPv4 address
- **Purpose:** Real client IP address
- **Example:** `X-Real-IP: 203.0.113.195`

### **X-Device-Id**
- **Type:** Header
- **Format:** UUID
- **Purpose:** Unique device identifier for fraud detection
- **Example:** `X-Device-Id: aa0e8400-e29b-41d4-a716-446655440005`
- **Notes:** Persistent across sessions.

### **X-Session-Id**
- **Type:** Header
- **Format:** UUID
- **Purpose:** User session identifier
- **Example:** `X-Session-Id: bb0e8400-e29b-41d4-a716-446655440006`

---

## ‚ö° Performance & Caching

### **Cache-Control**
- **Type:** Request/Response Header
- **Format:** Cache directives
- **Purpose:** Control caching behavior
- **Example:** `Cache-Control: max-age=3600, must-revalidate`

### **ETag**
- **Type:** Response Header
- **Format:** String (hash)
- **Purpose:** Entity tag for caching and optimistic locking
- **Example:** `ETag: "33a64df551425fcc55e4d42a148795d9f25f89d4"`

### **If-Match**
- **Type:** Request Header
- **Format:** ETag value
- **Purpose:** Conditional request for optimistic locking
- **Example:** `If-Match: "33a64df551425fcc55e4d42a148795d9f25f89d4"`
- **Notes:** Used for PUT/PATCH/DELETE to prevent lost updates.

### **If-None-Match**
- **Type:** Request Header
- **Format:** ETag value
- **Purpose:** Conditional GET for caching
- **Example:** `If-None-Match: "33a64df551425fcc55e4d42a148795d9f25f89d4"`
- **Notes:** Returns 304 Not Modified if resource hasn't changed.

### **Last-Modified** (Response)
- **Type:** Response Header
- **Format:** HTTP date
- **Purpose:** Last modification timestamp
- **Example:** `Last-Modified: Wed, 17 Jan 2026 12:00:00 GMT`

### **Expires** (Response)
- **Type:** Response Header
- **Format:** HTTP date
- **Purpose:** Expiration date for cached response
- **Example:** `Expires: Wed, 17 Jan 2026 13:00:00 GMT`

### **Age** (Response)
- **Type:** Response Header
- **Format:** Integer (seconds)
- **Purpose:** Age of cached response
- **Example:** `Age: 3600`

### **Vary** (Response)
- **Type:** Response Header
- **Format:** Comma-separated header names
- **Purpose:** Headers that affect caching
- **Example:** `Vary: Accept-Language, X-Currency, X-Tenant-Id`

### **Prefer**
- **Type:** Request Header
- **Format:** Preference tokens (RFC 7240)
- **Purpose:** Client preferences for response handling
- **Example:** `Prefer: return=representation`
- **Values:**
  - `return=minimal` - Return minimal response (e.g., 204 No Content)
  - `return=representation` - Return full resource representation
  - `respond-async` - Process request asynchronously

---

## üîÅ Idempotency & Concurrency

### **Idempotency-Key**
- **Type:** Request Header
- **Format:** UUID
- **Purpose:** Ensure idempotent operations
- **Example:** `Idempotency-Key: cc0e8400-e29b-41d4-a716-446655440007`
- **Notes:** Used for POST requests to prevent duplicate operations.

### **X-Resource-Version** (Response)
- **Type:** Response Header
- **Format:** Integer
- **Purpose:** Resource version number
- **Example:** `X-Resource-Version: 5`
- **Notes:** Incremented on each update. Used with If-Match for optimistic locking.

---

## üìä Pagination

### **pageSize** (Query Parameter)
- **Type:** Query Parameter
- **Format:** Integer (1-100)
- **Purpose:** Number of items per page
- **Example:** `?pageSize=20`
- **Default:** `20`
- **Max:** `100`

### **cursor** (Query Parameter)
- **Type:** Query Parameter
- **Format:** Opaque string
- **Purpose:** Pagination cursor
- **Example:** `?cursor=eyJpZCI6IjEyMyIsInRzIjoxNjQwOTk1MjAwfQ==`
- **Notes:** Cursor-based pagination for large datasets.

### **X-Total-Count** (Response)
- **Type:** Response Header
- **Format:** Integer
- **Purpose:** Total number of items across all pages
- **Example:** `X-Total-Count: 1523`

### **X-Page-Size** (Response)
- **Type:** Response Header
- **Format:** Integer
- **Purpose:** Items per page
- **Example:** `X-Page-Size: 20`

### **X-Page-Number** (Response)
- **Type:** Response Header
- **Format:** Integer (1-based)
- **Purpose:** Current page number
- **Example:** `X-Page-Number: 3`

### **X-Total-Pages** (Response)
- **Type:** Response Header
- **Format:** Integer
- **Purpose:** Total number of pages
- **Example:** `X-Total-Pages: 77`

### **X-Has-More** (Response)
- **Type:** Response Header
- **Format:** Boolean
- **Purpose:** Whether more pages are available
- **Example:** `X-Has-More: true`

### **Link** (Response)
- **Type:** Response Header
- **Format:** RFC 8288 link relations
- **Purpose:** Links to related pages
- **Example:** `Link: <https://api.stayos.com/v1/venues?cursor=abc>; rel="next"`

---

## üîÑ Rate Limiting

### **X-RateLimit-Limit** (Response)
- **Type:** Response Header
- **Format:** Integer
- **Purpose:** Request limit per time window
- **Example:** `X-RateLimit-Limit: 100`

### **X-RateLimit-Remaining** (Response)
- **Type:** Response Header
- **Format:** Integer
- **Purpose:** Remaining requests in current window
- **Example:** `X-RateLimit-Remaining: 87`

### **X-RateLimit-Reset** (Response)
- **Type:** Response Header
- **Format:** Unix timestamp
- **Purpose:** When rate limit resets
- **Example:** `X-RateLimit-Reset: 1705497600`

### **Retry-After** (Response)
- **Type:** Response Header
- **Format:** Integer (seconds) or HTTP date
- **Purpose:** Seconds to wait before retrying (429, 503)
- **Example:** `Retry-After: 60`

---

## ‚è±Ô∏è Async Operations

### **X-Poll-Interval** (Response)
- **Type:** Response Header
- **Format:** Integer (seconds)
- **Purpose:** Recommended polling interval for async operations
- **Example:** `X-Poll-Interval: 5`
- **Notes:** Used with 202 Accepted responses.

---

## üîê Security Headers (Response)

### **Strict-Transport-Security**
- **Purpose:** HTTPS enforcement (HSTS)
- **Example:** `Strict-Transport-Security: max-age=31536000; includeSubDomains`

### **X-Content-Type-Options**
- **Purpose:** Prevent MIME type sniffing
- **Example:** `X-Content-Type-Options: nosniff`

### **X-Frame-Options**
- **Purpose:** Clickjacking protection
- **Example:** `X-Frame-Options: DENY`

### **X-XSS-Protection**
- **Purpose:** XSS filter configuration
- **Example:** `X-XSS-Protection: 1; mode=block`

### **Content-Security-Policy**
- **Purpose:** Content Security Policy directives
- **Example:** `Content-Security-Policy: default-src 'self'`

---

## üìù Filtering & Sorting

### **sortBy** (Query Parameter)
- **Type:** Query Parameter
- **Format:** Field name
- **Purpose:** Field to sort by
- **Example:** `?sortBy=createdAt`

### **sortOrder** (Query Parameter)
- **Type:** Query Parameter
- **Format:** `asc` or `desc`
- **Purpose:** Sort direction
- **Example:** `?sortOrder=desc`
- **Default:** `asc`

### **expand** (Query Parameter)
- **Type:** Query Parameter
- **Format:** Comma-separated field names
- **Purpose:** Include related resources
- **Example:** `?expand=property,guest,rateStrategy`
- **Notes:** Reduces number of API calls by embedding related data.

---

## üéØ Best Practices

### **Required Headers for All Requests**
```http
Authorization: Bearer <token>
X-Tenant-Id: <tenant-uuid>
Accept-Language: en-US
X-Timezone: America/New_York
```

### **Recommended Headers for Production**
```http
X-Correlation-Id: <uuid>
X-Client-Id: stayos-web-app
X-Client-Version: 2.1.0
User-Agent: StayOS-Web/2.1.0
```

### **Idempotent POST Requests**
```http
POST /v1/reservations
Idempotency-Key: <uuid>
```

### **Optimistic Locking (Updates)**
```http
PUT /v1/reservations/123
If-Match: "33a64df551425fcc55e4d42a148795d9f25f89d4"
```

### **Conditional GET (Caching)**
```http
GET /v1/properties/456
If-None-Match: "33a64df551425fcc55e4d42a148795d9f25f89d4"
```

---

## üìö References

- **RFC 7231** - HTTP/1.1 Semantics and Content
- **RFC 7240** - Prefer Header for HTTP
- **RFC 7807** - Problem Details for HTTP APIs
- **RFC 8288** - Web Linking
- **OpenTelemetry** - Distributed Tracing Standard
- **ISO 639-1** - Language Codes
- **ISO 4217** - Currency Codes
- **IANA Timezone Database** - Timezone Names

---

**Last Updated:** 2026-01-17
**Version:** 1.0


