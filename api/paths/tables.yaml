/venues/{venueId}/tables:
  parameters:
  - name: venueId
    in: path
    required: true
    description: Unique venue identifier
    schema:
      type: string
      format: uuid
  get:
    tags:
    - Tables
    summary: List tables
    description: |
      Retrieve a paginated list of tables for a venue.
      
      **Authorization:** Requires `read:tables` scope
      
      **Rate Limit:** 100 requests/minute
    operationId: listTables
    security:
    - OAuth2:
      - read:tables
    - BearerAuth: []
    parameters:
    - $ref: '../openapi.yaml#/components/parameters/PageSize'
    - $ref: '../openapi.yaml#/components/parameters/PageCursor'
    - name: sectionId
      in: query
      description: Filter by floor section
      schema:
        type: string
        format: uuid
    - name: status
      in: query
      description: Filter by table status
      schema:
        type: string
        enum:
        - AVAILABLE
        - OCCUPIED
        - RESERVED
        - CLEANING
        - OUT_OF_SERVICE
    - name: minCapacity
      in: query
      description: Filter by minimum capacity
      schema:
        type: integer
        minimum: 1
    - name: maxCapacity
      in: query
      description: Filter by maximum capacity
      schema:
        type: integer
        minimum: 1
    - name: shape
      in: query
      description: Filter by table shape
      schema:
        type: string
        enum:
        - SQUARE
        - RECTANGLE
        - ROUND
        - OVAL
        - BOOTH
        - BAR_SEATING
        - COUNTER
    - name: isAccessible
      in: query
      description: Filter by wheelchair accessibility
      schema:
        type: boolean
    - name: hasWindowView
      in: query
      description: Filter by window view
      schema:
        type: boolean
    - $ref: '../openapi.yaml#/components/parameters/SortBy'
    - $ref: '../openapi.yaml#/components/parameters/SortOrder'
    - $ref: '../openapi.yaml#/components/parameters/Expand'
    responses:
      '200':
        description: Successful response
        headers:
          X-RateLimit-Limit:
            $ref: '../openapi.yaml#/components/headers/X-RateLimit-Limit'
          X-RateLimit-Remaining:
            $ref: '../openapi.yaml#/components/headers/X-RateLimit-Remaining'
          X-RateLimit-Reset:
            $ref: '../openapi.yaml#/components/headers/X-RateLimit-Reset'
          X-Request-Id:
            $ref: '../openapi.yaml#/components/headers/X-Request-Id'
        content:
          application/json:
            schema:
              $ref: '../schemas/tables.yaml#/TableListResponse'
      '400':
        $ref: '../openapi.yaml#/components/responses/BadRequest'
      '401':
        $ref: '../openapi.yaml#/components/responses/Unauthorized'
      '403':
        $ref: '../openapi.yaml#/components/responses/Forbidden'
      '404':
        $ref: '../openapi.yaml#/components/responses/NotFound'
      '429':
        $ref: '../openapi.yaml#/components/responses/TooManyRequests'
      '500':
        $ref: '../openapi.yaml#/components/responses/InternalServerError'
  post:
    tags:
    - Tables
    summary: Create table
    description: |
      Create a new table for a venue.
      
      **Authorization:** Requires `write:tables` scope
      
      **Rate Limit:** 100 requests/minute
      
      **Idempotency:** Supports idempotency key
    operationId: createTable
    security:
    - OAuth2:
      - write:tables
    - BearerAuth: []
    parameters:
    - $ref: '../openapi.yaml#/components/parameters/IdempotencyKey'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../schemas/tables.yaml#/TableCreateRequest'
    responses:
      '201':
        description: Table created successfully
        headers:
          Location:
            $ref: '../openapi.yaml#/components/headers/Location'
          ETag:
            $ref: '../openapi.yaml#/components/headers/ETag'
          X-Request-Id:
            $ref: '../openapi.yaml#/components/headers/X-Request-Id'
        content:
          application/json:
            schema:
              $ref: '../schemas/tables.yaml#/Table'
      '400':
        $ref: '../openapi.yaml#/components/responses/BadRequest'
      '401':
        $ref: '../openapi.yaml#/components/responses/Unauthorized'
      '403':
        $ref: '../openapi.yaml#/components/responses/Forbidden'
      '404':
        $ref: '../openapi.yaml#/components/responses/NotFound'
      '409':
        $ref: '../openapi.yaml#/components/responses/Conflict'
      '422':
        $ref: '../openapi.yaml#/components/responses/UnprocessableEntity'
      '429':
        $ref: '../openapi.yaml#/components/responses/TooManyRequests'
      '500':
        $ref: '../openapi.yaml#/components/responses/InternalServerError'

/venues/{venueId}/tables/{tableId}:
  parameters:
  - name: venueId
    in: path
    required: true
    description: Unique venue identifier
    schema:
      type: string
      format: uuid
  - name: tableId
    in: path
    required: true
    description: Unique table identifier
    schema:
      type: string
      format: uuid
  get:
    tags:
    - Tables
    summary: Get table
    description: |
      Retrieve a specific table by ID.

      **Authorization:** Requires `read:tables` scope

      **Rate Limit:** 100 requests/minute
    operationId: getTable
    security:
    - OAuth2:
      - read:tables
    - BearerAuth: []
    parameters:
    - $ref: '../openapi.yaml#/components/parameters/Expand'
    - $ref: '../openapi.yaml#/components/parameters/IfNoneMatch'
    responses:
      '200':
        description: Successful response
        headers:
          ETag:
            $ref: '../openapi.yaml#/components/headers/ETag'
          X-Request-Id:
            $ref: '../openapi.yaml#/components/headers/X-Request-Id'
        content:
          application/json:
            schema:
              $ref: '../schemas/tables.yaml#/Table'
      '304':
        description: Not Modified (ETag matched)
      '400':
        $ref: '../openapi.yaml#/components/responses/BadRequest'
      '401':
        $ref: '../openapi.yaml#/components/responses/Unauthorized'
      '403':
        $ref: '../openapi.yaml#/components/responses/Forbidden'
      '404':
        $ref: '../openapi.yaml#/components/responses/NotFound'
      '429':
        $ref: '../openapi.yaml#/components/responses/TooManyRequests'
      '500':
        $ref: '../openapi.yaml#/components/responses/InternalServerError'
  put:
    tags:
    - Tables
    summary: Update table
    description: |
      Update an existing table.

      **Authorization:** Requires `write:tables` scope

      **Rate Limit:** 100 requests/minute

      **Optimistic Locking:** Supports If-Match header with ETag
    operationId: updateTable
    security:
    - OAuth2:
      - write:tables
    - BearerAuth: []
    parameters:
    - $ref: '../openapi.yaml#/components/parameters/IfMatch'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../schemas/tables.yaml#/TableUpdateRequest'
    responses:
      '200':
        description: Table updated successfully
        headers:
          ETag:
            $ref: '../openapi.yaml#/components/headers/ETag'
          X-Request-Id:
            $ref: '../openapi.yaml#/components/headers/X-Request-Id'
        content:
          application/json:
            schema:
              $ref: '../schemas/tables.yaml#/Table'
      '400':
        $ref: '../openapi.yaml#/components/responses/BadRequest'
      '401':
        $ref: '../openapi.yaml#/components/responses/Unauthorized'
      '403':
        $ref: '../openapi.yaml#/components/responses/Forbidden'
      '404':
        $ref: '../openapi.yaml#/components/responses/NotFound'
      '409':
        $ref: '../openapi.yaml#/components/responses/Conflict'
      '412':
        $ref: '../openapi.yaml#/components/responses/PreconditionFailed'
      '422':
        $ref: '../openapi.yaml#/components/responses/UnprocessableEntity'
      '429':
        $ref: '../openapi.yaml#/components/responses/TooManyRequests'
      '500':
        $ref: '../openapi.yaml#/components/responses/InternalServerError'
  delete:
    tags:
    - Tables
    summary: Delete table
    description: |
      Delete a table (soft delete).

      **Authorization:** Requires `write:tables` scope

      **Rate Limit:** 100 requests/minute
    operationId: deleteTable
    security:
    - OAuth2:
      - write:tables
    - BearerAuth: []
    parameters:
    - $ref: '../openapi.yaml#/components/parameters/IfMatch'
    responses:
      '204':
        $ref: '../openapi.yaml#/components/responses/NoContent'
      '400':
        $ref: '../openapi.yaml#/components/responses/BadRequest'
      '401':
        $ref: '../openapi.yaml#/components/responses/Unauthorized'
      '403':
        $ref: '../openapi.yaml#/components/responses/Forbidden'
      '404':
        $ref: '../openapi.yaml#/components/responses/NotFound'
      '409':
        $ref: '../openapi.yaml#/components/responses/Conflict'
      '412':
        $ref: '../openapi.yaml#/components/responses/PreconditionFailed'
      '429':
        $ref: '../openapi.yaml#/components/responses/TooManyRequests'
      '500':
        $ref: '../openapi.yaml#/components/responses/InternalServerError'

/venues/{venueId}/tables/availability:
  parameters:
  - name: venueId
    in: path
    required: true
    description: Unique venue identifier
    schema:
      type: string
      format: uuid
  get:
    tags:
    - Tables
    summary: Check table availability
    description: |
      Check table availability for a specific date and time.

      **Authorization:** Requires `read:tables` scope

      **Rate Limit:** 100 requests/minute
    operationId: checkTableAvailability
    security:
    - OAuth2:
      - read:tables
    - BearerAuth: []
    parameters:
    - name: date
      in: query
      required: true
      description: Date to check availability
      schema:
        type: string
        format: date
    - name: time
      in: query
      required: true
      description: Time to check availability
      schema:
        type: string
        format: time
    - name: partySize
      in: query
      description: Party size to filter suitable tables
      schema:
        type: integer
        minimum: 1
    - name: sectionId
      in: query
      description: Filter by floor section
      schema:
        type: string
        format: uuid
    responses:
      '200':
        description: Successful response
        headers:
          X-Request-Id:
            $ref: '../openapi.yaml#/components/headers/X-Request-Id'
        content:
          application/json:
            schema:
              $ref: '../schemas/tables.yaml#/TableAvailabilityResponse'
      '400':
        $ref: '../openapi.yaml#/components/responses/BadRequest'
      '401':
        $ref: '../openapi.yaml#/components/responses/Unauthorized'
      '403':
        $ref: '../openapi.yaml#/components/responses/Forbidden'
      '404':
        $ref: '../openapi.yaml#/components/responses/NotFound'
      '429':
        $ref: '../openapi.yaml#/components/responses/TooManyRequests'
      '500':
        $ref: '../openapi.yaml#/components/responses/InternalServerError'

